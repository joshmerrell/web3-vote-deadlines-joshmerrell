---
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import StateCard from "../components/StateCard.astro";
import type { State } from "../types";

// data source
// replace temporary JSON placeholder API
const source = "https://dedline-api.netlify.app/states.json";
// fetch the data
const res = await fetch(source); 
// store retreived data
const states: State[] = (await res.json()).states;


const title = "US Voting Info";

---

<BaseLayout title={title}>
	<Header title={title} />
	<ul class="cards">
		{states.map((state) => (
			<StateCard state={state} />
		))}
	</ul>
	<Footer />
</BaseLayout>